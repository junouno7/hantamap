<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Real-Time Node Alignment Tool</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div id="controls">
            <h1>Alignment Tool</h1>
            <div class="control-group">
                <label for="jsonFile">1. Upload <code>nodes.json</code></label>
                <input type="file" id="jsonFile" accept=".json">
            </div>

            <!-- NEW SELECTION TOOLS -->
            <h2>2. Select & Move Groups</h2>
            <div class="control-group selection-controls">
                <button id="multiSelectButton">Enable Multi-Select</button>
                <button id="clearSelectButton" disabled>Clear Selection</button>
            </div>
            <p class="instructions">
                Click "Enable Multi-Select", then click on nodes to add them to the group. Drag any selected node to move the whole group.
            </p>

            <h2>3. Global Alignment</h2>
            <div class="control-group sliders">
                <!-- Slider rows are unchanged -->
                <div class="slider-row">
                    <label for="xScale">X-Scale</label>
                    <input type="range" id="xScale" min="0.5" max="3" value="1" step="0.001"><input type="number" id="xScaleNum" min="0.5" max="3" value="1" step="0.001">
                </div>
                <div class="slider-row">
                    <label for="yScale">Y-Scale</label>
                    <input type="range" id="yScale" min="0.5" max="3" value="1" step="0.001"><input type="number" id="yScaleNum" min="0.5" max="3" value="1" step="0.001">
                </div>
                <div class="slider-row">
                    <label for="xOffset">X-Offset</label>
                    <input type="range" id="xOffset" min="-2000" max="2000" value="0" step="1"><input type="number" id="xOffsetNum" min="-2000" max="2000" value="0" step="1">
                </div>
                <div class="slider-row">
                    <label for="yOffset">Y-Offset</label>
                    <input type="range" id="yOffset" min="-2000" max="2000" value="0" step="1"><input type="number" id="yOffsetNum" min="-2000" max="2000" value="0" step="1">
                </div>
                <div class="flip-control">
                    <label><input type="checkbox" id="flipYCheckbox"> <strong>Flip Y-Axis</strong></label>
                </div>
                <button id="resetButton">Reset Global Adjustments</button>
            </div>
        </div>

        <div id="map-container">
            <div id="map"></div>
        </div>

        <div id="output-container">
            <h2>4. Final JSON Output</h2>
            <button id="copyButton">Copy JSON</button>
            <pre id="output"></pre>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="script.js"></script>
</body>
</html>